
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="网络安全工程师的学习笔记">
      
      
        <meta name="author" content="Josh">
      
      
        <link rel="canonical" href="https://Superior-Josh.github.io/Cyber-Security-Engineer/%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4%E5%AE%89%E5%85%A8/%E8%BF%90%E8%A1%8C%E6%97%B6%E4%BF%9D%E6%8A%A4%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3%EF%BC%9AASLR%E3%80%81DEP_NX%E3%80%81Stack%20Canary/">
      
      
        <link rel="prev" href="../%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94%E4%B8%8E%E9%80%89%E5%9E%8B/">
      
      
        <link rel="next" href="../%E9%98%B2%E7%81%AB%E5%A2%99%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%9Aiptables%E4%B8%8Enftables%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>运行时保护技术详解：ASLR、DEP_NX、Stack Canary - 网络安全工程师的学习笔记</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aslrdepnxstack-canary" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="网络安全工程师的学习笔记" class="md-header__button md-logo" aria-label="网络安全工程师的学习笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            网络安全工程师的学习笔记
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              运行时保护技术详解：ASLR、DEP_NX、Stack Canary
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="teal"  aria-label="切换到深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="切换到浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C/" class="md-tabs__link">
          
  
  
  编程语言

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/Linux/" class="md-tabs__link">
          
  
  
  计算机基础

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../AI%20%E5%AE%89%E5%85%A8/" class="md-tabs__link">
          
  
  
  网络空间安全

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E6%B5%8B%E8%AF%95/Black-box%20Testing/" class="md-tabs__link">
          
  
  
  测试

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="网络安全工程师的学习笔记" class="md-nav__button md-logo" aria-label="网络安全工程师的学习笔记" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    网络安全工程师的学习笔记
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    编程语言
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            编程语言
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机基础
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            计算机基础
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/Linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据库
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数据结构与算法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络协议
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算机操作系统
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    网络空间安全
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            网络空间安全
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../AI%20%E5%AE%89%E5%85%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI 安全
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ISO%2027001/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISO 27001
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Metasploit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metasploit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SELinux%E4%B8%8EAppArmor%E8%AF%A6%E8%A7%A3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SELinux与AppArmor详解
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SonarQube/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SonarQube
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SQLmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQLmap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%AF%86%E7%A0%81%E5%AD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    密码学
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%95%8F%E6%84%9F%E6%95%B0%E6%8D%AE%E5%AE%89%E5%85%A8%E5%AD%98%E5%82%A8%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    敏感数据安全存储核心技术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E6%BC%8F%E6%B4%9E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    漏洞
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络安全设备
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E6%94%BB%E9%98%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络攻防
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%BD%91%E7%BB%9C%E9%9A%94%E7%A6%BB%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E8%A7%A3%E6%9E%90%EF%BC%9AVLAN%E3%80%81%E7%BD%91%E7%BB%9C%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E4%B8%8E%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络隔离核心技术解析：VLAN、网络命名空间与容器网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E6%A8%A1%E5%9E%8B%E5%AF%B9%E6%AF%94%E4%B8%8E%E9%80%89%E5%9E%8B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    访问控制模型对比与选型
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    运行时保护技术详解：ASLR、DEP_NX、Stack Canary
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E9%98%B2%E7%81%AB%E5%A2%99%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%EF%BC%9Aiptables%E4%B8%8Enftables%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    防火墙核心技术：iptables与nftables规则配置详解
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    测试
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            测试
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%B5%8B%E8%AF%95/Black-box%20Testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Black-box Testing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="aslrdepnxstack-canary">运行时保护技术详解：ASLR、DEP/NX、Stack Canary<a class="headerlink" href="#aslrdepnxstack-canary" title="Permanent link">&para;</a></h1>
<p>运行时保护是操作系统和编译器为抵御恶意代码利用（尤其是内存破坏类漏洞，如缓冲区溢出）而设计的核心安全机制，其核心目标是打破漏洞利用的“确定性”——即阻止攻击者精准控制内存布局、执行非法代码或篡改关键执行流程。本文将详细解析三种最经典且广泛应用的运行时保护技术：<strong>ASLR（地址空间布局随机化）</strong>、<strong>DEP/NX（数据执行保护/不可执行页保护）</strong>和<strong>Stack Canary（栈金丝雀）</strong>，重点聚焦其设计原理、核心机制及关键细节。</p>
<h1 id="aslraddress-space-layout-randomization">一、ASLR（Address Space Layout Randomization，地址空间布局随机化）<a class="headerlink" href="#aslraddress-space-layout-randomization" title="Permanent link">&para;</a></h1>
<h2 id="11">1.1 核心定义<a class="headerlink" href="#11" title="Permanent link">&para;</a></h2>
<p>ASLR是一种通过<strong>随机化进程内存空间中关键区域的加载地址</strong>，使攻击者无法预先获知目标代码、数据或栈/堆位置的保护技术。其本质是破坏漏洞利用中“地址确定性”这一前提——传统漏洞利用（如缓冲区溢出）往往依赖于攻击者已知目标函数、shellcode或返回地址的固定内存地址。</p>
<h2 id="12">1.2 设计原理<a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<p>在ASLR出现前，操作系统加载进程时，代码段（.text）、数据段（.data/.bss）、堆（heap）、栈（stack）以及动态链接库（如Windows的.dll、Linux的.so）的加载地址是<strong>固定不变</strong>的。例如，Linux系统中未开启ASLR时，libc.so库始终加载到0x7ffff7a00000附近，栈的起始地址也固定为0x7fffffff0000左右。攻击者可通过本地调试或漏洞探测获取这些固定地址，进而构造精准的溢出 payload （如覆盖返回地址为已知的“系统调用函数地址”）。</p>
<p>ASLR的核心原理是：<strong>在进程启动时，由操作系统内核为其内存空间的关键区域分配一个随机偏移量，使各区域的实际加载地址在每次启动时都不同</strong>。即使攻击者通过漏洞获取了内存读写权限，也无法预先确定目标地址，从而大幅提高利用难度。</p>
<h2 id="13">1.3 核心机制<a class="headerlink" href="#13" title="Permanent link">&para;</a></h2>
<p>ASLR的保护范围覆盖进程内存的关键区域，不同区域的随机化方式和粒度存在差异，具体可分为以下几类：</p>
<ol>
<li>
<p><strong>代码段随机化</strong>：进程自身的可执行代码（.text段）加载地址随机化。编译器需生成“位置无关代码（PIC，Position-Independent Code）”，使代码不依赖固定地址，可在任意位置执行。对于动态链接库（DLL/SO），必须编译为PIC才能支持随机加载；主程序若要实现代码段随机化，也需启用PIC编译选项（如GCC的-fPIC参数）。</p>
</li>
<li>
<p><strong>数据段随机化</strong>：初始化数据段（.data，存储已赋值的全局变量）和未初始化数据段（.bss，存储未赋值的全局变量）的加载地址随机化。数据段的随机化依赖于代码段的随机偏移——由于数据段与代码段在内存中存在固定偏移关系，代码段的随机偏移会间接带动数据段地址随机化。</p>
</li>
<li>
<p><strong>栈随机化</strong>：栈的起始地址在进程启动时随机分配一个偏移量。例如，Linux系统中栈的默认随机偏移范围可达16位（即65536种可能），部分系统支持更高位的随机化。栈随机化能有效抵御针对栈的缓冲区溢出攻击——攻击者无法预先确定栈中返回地址、局部变量的精准位置，难以通过溢出覆盖关键数据。</p>
</li>
<li>
<p><strong>堆随机化</strong>：堆的起始地址和堆块的分配地址随机化。操作系统的内存分配器（如Linux的ptmalloc、Windows的HeapAlloc）会在堆初始化时加入随机偏移，同时在分配堆块时引入随机间隙，进一步增加堆地址的不确定性。</p>
</li>
<li>
<p><strong>动态链接库/共享库随机化</strong>：动态链接库的加载地址随机化，这是ASLR中至关重要的一环。由于攻击者常利用系统库中的函数（如system()、execve()）构造攻击链，库地址的随机化会直接导致攻击者无法预先获取这些函数的地址。</p>
</li>
</ol>
<p>ASLR的随机化“强度”由偏移量的位数决定——位数越多，可能的地址组合越多，攻击者暴力猜测地址的概率越低。例如，32位系统中ASLR的随机化强度通常为16-20位（约百万级组合），而64位系统可支持30位以上的随机化（千亿级组合），暴力破解几乎不可能。</p>
<h2 id="14">1.4 局限性<a class="headerlink" href="#14" title="Permanent link">&para;</a></h2>
<p>ASLR并非万能，其有效性依赖两个前提：一是进程及依赖库需支持PIC（位置无关代码），若存在非PIC的库，其地址无法随机化，会成为“地址泄露”的突破口；二是攻击者无法通过漏洞获取内存地址信息（如通过信息泄露漏洞读取栈/堆地址）——若攻击者能泄露一个关键地址，可通过“基地址+固定偏移”推导出其他区域地址，绕过ASLR。</p>
<h1 id="depnxdata-execution-prevention-no-execute">二、DEP/NX（Data Execution Prevention / No-eXecute，数据执行保护/不可执行页保护）<a class="headerlink" href="#depnxdata-execution-prevention-no-execute" title="Permanent link">&para;</a></h1>
<h2 id="21">2.1 核心定义<a class="headerlink" href="#21" title="Permanent link">&para;</a></h2>
<p>DEP（Windows术语）或NX（Linux/UNIX术语，全称为“No-eXecute”）是一种通过<strong>标记内存页的“执行权限”</strong>，禁止在数据区域（如栈、堆、数据段）执行代码的保护技术。其核心目标是阻止攻击者将恶意代码（如shellcode）注入数据区域后执行。</p>
<h2 id="22">2.2 设计原理<a class="headerlink" href="#22" title="Permanent link">&para;</a></h2>
<p>传统操作系统的内存页默认同时具备“读”“写”“执行”权限，这为缓冲区溢出攻击提供了便利：攻击者可通过溢出将恶意shellcode写入栈或堆（数据区域），再通过篡改返回地址等方式，使程序跳转到栈/堆中的shellcode位置执行。</p>
<p>DEP/NX的设计原理基于“<strong>代码与数据分离</strong>”的安全原则：将内存页划分为“代码页”（如.text段，具备“读+执行”权限，无“写”权限）和“数据页”（如栈、堆、.data段，具备“读+写”权限，无“执行”权限）。当程序试图在标记为“不可执行（NX）”的数据页中执行代码时，CPU会触发硬件异常（如Linux的SIGSEGV信号、Windows的访问违规异常），终止程序运行，从而阻断恶意代码执行。</p>
<h2 id="23">2.3 核心机制<a class="headerlink" href="#23" title="Permanent link">&para;</a></h2>
<p>DEP/NX的实现依赖于CPU硬件和操作系统内核的协同支持，具体分为两个层面：</p>
<ol>
<li>
<p><strong>硬件层面：NX位支持</strong>现代CPU（如Intel的PAE模式、AMD的NX位）在内存页表项中增加了一个“NX位”（No-eXecute Bit），用于标记该内存页是否可执行。当CPU执行指令时，会先检查指令所在内存页的NX位：若NX位为1（不可执行），则触发异常；若NX位为0（可执行），则正常执行。需要注意的是，32位系统需启用PAE（物理地址扩展）模式才能支持NX位，而64位系统默认支持NX位。</p>
</li>
<li>
<p><strong>操作系统层面：权限管理</strong>操作系统内核在进程启动时，会根据内存区域的类型（代码/数据）设置对应的NX位：代码段（.text）：设置为“读+执行”（NX=0），禁止写入（防止代码被篡改）；</p>
</li>
<li>
<p>数据段（.data/.bss）：设置为“读+写”（NX=1），禁止执行；</p>
</li>
<li>
<p>栈和堆：默认设置为“读+写”（NX=1），禁止执行；</p>
</li>
<li>
<p>动态分配内存：如malloc()分配的堆内存、mmap()映射的内存，默认权限为“读+写”，需显式指定“执行”权限（如mmap的PROT_EXEC参数）才会开启执行权限。</p>
</li>
</ol>
<p>此外，Windows的DEP还支持两种模式：<strong>硬件DEP</strong>（依赖CPU的NX位，强制阻止数据页执行）和<strong>软件DEP</strong>（基于编译器的安全检查，如对栈的额外验证，兼容性更高但保护强度较弱）。Linux系统仅支持硬件NX，通过内核参数（如/proc/sys/vm/nx_always_on）控制启用状态。</p>
<h2 id="24">2.4 局限性<a class="headerlink" href="#24" title="Permanent link">&para;</a></h2>
<p>DEP/NX的核心防御目标是“阻止数据页执行代码”，但无法抵御“代码复用攻击（Code Reuse Attacks）”——攻击者可利用内存中已存在的合法代码（如系统库中的函数片段，称为“gadget”），通过修改控制流（如返回地址、函数指针）拼接出攻击逻辑（如调用system("/bin/sh")），典型攻击方式包括ROP（Return-Oriented Programming，返回导向编程）和JOP（Jump-Oriented Programming，跳转导向编程）。</p>
<h1 id="stack-canary">三、Stack Canary（栈金丝雀）<a class="headerlink" href="#stack-canary" title="Permanent link">&para;</a></h1>
<h2 id="31">3.1 核心定义<a class="headerlink" href="#31" title="Permanent link">&para;</a></h2>
<p>Stack Canary（栈金丝雀，也称为Stack Cookie）是一种通过<strong>在栈中关键位置插入随机值</strong>，检测栈缓冲区溢出攻击的保护技术。其名称源于“金丝雀报信”——矿工曾利用金丝雀对有毒气体的敏感性判断矿井安全性，栈金丝雀则通过自身是否被篡改来判断栈是否被溢出攻击。</p>
<h2 id="32">3.2 设计原理<a class="headerlink" href="#32" title="Permanent link">&para;</a></h2>
<p>栈缓冲区溢出攻击的核心逻辑是：通过向栈中某个局部变量（如字符数组）写入超出其长度的数据，覆盖栈中后续存储的关键数据——最典型的是覆盖“函数返回地址”，使函数执行完后跳转到攻击者指定的地址。</p>
<p>栈的生长方向是“从高地址向低地址”，而函数调用时栈的布局为：<strong>函数参数 → 返回地址 → 帧指针（EBP） → 局部变量</strong>（局部变量从低地址向高地址排列）。当局部变量发生溢出时，溢出数据会从局部变量的高地址向更高地址覆盖，依次覆盖帧指针、返回地址。</p>
<p>Stack Canary的设计原理是：<strong>在函数栈帧的“局部变量”和“帧指针/返回地址”之间插入一个随机生成的“金丝雀值”</strong>。当函数执行即将返回时，先检查金丝雀值是否与初始值一致：若一致，说明栈未被溢出篡改，正常返回；若不一致，说明发生了缓冲区溢出（溢出数据已覆盖金丝雀值），立即终止程序运行，阻止攻击继续。</p>
<h2 id="33">3.3 核心机制<a class="headerlink" href="#33" title="Permanent link">&para;</a></h2>
<p>Stack Canary的实现由编译器（如GCC、Clang）和操作系统协同完成，完整流程分为“值生成→插入栈帧→验证→异常处理”四步：</p>
<ol>
<li>
<p><strong>金丝雀值生成</strong>金丝雀值由操作系统内核或编译器在进程启动时生成，具备两个关键特性：<strong>随机性</strong>和<strong>唯一性</strong>。随机性：值从内核的随机数生成器（如Linux的/dev/urandom、Windows的CryptGenRandom）获取，每次进程启动时生成不同的值，攻击者无法预先猜测；</p>
</li>
<li>
<p>唯一性：部分实现中，金丝雀值与进程PID绑定，进一步确保不同进程的金丝雀值不同。</p>
</li>
<li>
<p><strong>插入栈帧</strong>编译器在编译代码时，对包含栈缓冲区的函数（如使用char[]的函数）自动插入金丝雀值的处理逻辑：当函数被调用时，在栈帧的“局部变量”和“帧指针（EBP）”之间插入金丝雀值。此时栈帧布局变为：<strong>局部变量 → 金丝雀值 → 帧指针（EBP） → 返回地址</strong>。例如，GCC通过-fstack-protector（基础保护，仅对包含危险函数的函数生效）或-fstack-protector-all（对所有函数生效）编译选项启用栈金丝雀。</p>
</li>
<li>
<p><strong>返回前验证</strong>编译器在函数返回指令（ret）之前，插入一段“金丝雀值验证代码”：从栈中读取当前的金丝雀值，与存储在只读区域的初始值进行比较。验证逻辑由编译器自动生成，对应GCC中的__stack_chk_fail()函数——若验证失败（值不一致），则调用该函数；若一致，则执行ret指令返回。</p>
</li>
<li>
<p><strong>异常处理</strong>当验证失败时，__stack_chk_fail()函数会立即触发进程终止逻辑，通常会打印错误信息（如“<strong><em> stack smashing detected </em></strong>: terminated”）并发送SIGABRT信号终止进程，确保攻击者无法通过溢出篡改返回地址并执行恶意逻辑。</p>
</li>
</ol>
<h2 id="34">3.4 金丝雀值的类型<a class="headerlink" href="#34" title="Permanent link">&para;</a></h2>
<p>根据安全性和实现复杂度，金丝雀值可分为三类，保护强度依次提升：</p>
<ol>
<li>
<p><strong>Null Canary（空字节金丝雀）</strong>：值为0x00（空字节），利用大多数字符串操作函数（如strcpy、strcat）遇到空字节会停止的特性。若攻击者使用字符串函数溢出，无法覆盖空字节后的金丝雀值，但防御能力较弱——攻击者可使用非字符串函数（如memcpy）绕过。</p>
</li>
<li>
<p><strong>Random Canary（随机金丝雀）</strong>：最主流的实现，值为完全随机的32位或64位整数，安全性依赖随机性，攻击者难以猜测。</p>
</li>
<li>
<p><strong>Terminator Canary（终止符金丝雀）</strong>：结合空字节、换行符等特殊字符，进一步利用输入函数的特性限制溢出范围，保护强度高于空字节金丝雀。</p>
</li>
</ol>
<h2 id="35">3.5 局限性<a class="headerlink" href="#35" title="Permanent link">&para;</a></h2>
<p>Stack Canary仅能防御“覆盖返回地址的栈缓冲区溢出”，存在以下局限性：</p>
<ul>
<li>
<p>无法防御堆溢出、格式化字符串等非栈溢出漏洞；</p>
</li>
<li>
<p>若攻击者通过信息泄露漏洞获取到金丝雀值（如读取存储金丝雀值的只读区域），可构造溢出数据时“精准覆盖”金丝雀值为原始值，绕过验证；</p>
</li>
<li>
<p>仅对栈溢出有效，对不覆盖金丝雀值的“部分溢出”（如仅篡改局部变量而非返回地址）无法检测。</p>
</li>
</ul>
<h1 id="_1">四、三种技术的对比与协同作用<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<table>
<thead>
<tr>
<th>技术类型</th>
<th>核心防御目标</th>
<th>依赖条件</th>
<th>典型绕过方式</th>
</tr>
</thead>
<tbody>
<tr>
<td>ASLR</td>
<td>破坏地址确定性，阻止攻击者定位目标地址</td>
<td>进程及库支持PIC，CPU支持地址随机化</td>
<td>地址泄露漏洞、暴力猜测（低强度随机化）</td>
</tr>
<tr>
<td>DEP/NX</td>
<td>阻止数据页执行代码，防御shellcode注入</td>
<td>CPU支持NX位，操作系统启用权限管理</td>
<td>代码复用攻击（ROP/JOP）</td>
</tr>
<tr>
<td>Stack Canary</td>
<td>检测栈溢出，阻止返回地址被篡改</td>
<td>编译器支持（如GCC的-fstack-protector）</td>
<td>金丝雀值泄露、部分溢出（不覆盖金丝雀）</td>
</tr>
<tr>
<td>实际安全防护中，三种技术通常<strong>协同工作</strong>，形成“多层防御体系”：ASLR使攻击者无法定位gadget地址，DEP/NX阻止shellcode执行，Stack Canary检测栈溢出——单一技术可被绕过，但多层技术叠加后，攻击难度呈指数级提升。例如，攻击者若要绕过三者，需同时实现“地址泄露（突破ASLR）+ 金丝雀值泄露（突破Stack Canary）+ ROP构造（突破DEP/NX）”，几乎需要控制多个漏洞才能完成。</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="_2">五、总结<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h1>
<p>ASLR、DEP/NX、Stack Canary是运行时保护的“三驾马车”，分别从“地址随机化”“权限隔离”“溢出检测”三个维度构建防御：</p>
<ul>
<li>
<p>ASLR解决“<strong>where</strong>”的问题——让攻击者不知道目标在内存的哪里；</p>
</li>
<li>
<p>DEP/NX解决“<strong>execute</strong>”的问题——让攻击者注入的代码无法执行；</p>
</li>
<li>
<p>Stack Canary解决“<strong>tamper</strong>”的问题——让攻击者篡改栈关键数据时被发现。</p>
</li>
</ul>
<p>三者虽各有局限性，但协同使用时能有效抵御绝大多数传统内存破坏攻击，是现代操作系统和应用程序不可或缺的安全基础。同时，随着攻击技术的演进（如ROP、JIT喷射等），运行时保护技术也在不断升级（如Control-Flow Integrity、Shadow Stack等），形成“攻击与防御”的持续对抗。</p>
<blockquote>
<p>（注：文档部分内容可能由 AI 生成）</p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>