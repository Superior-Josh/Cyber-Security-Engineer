### tr

tr 命令是 Linux 下的字符转换工具，核心功能是对标准输入的字符进行替换、删除或压缩，且仅处理单个字符。

#### 一、tr 命令基本格式

tr 命令的语法结构非常简洁，主要有两种使用形式，支持从文件读取输入或通过管道接收输入。

```
# 格式1：从标准输入（如管道）读取数据
tr [选项] '原始字符集' '目标字符集'

# 格式2：从指定文件读取数据（需配合 -f 选项）
tr [选项] -f 输入文件 '原始字符集' '目标字符集'
```

#### 二、核心功能与常用选项

tr 的功能围绕 “字符映射” 展开，通过不同选项实现替换、删除、压缩等操作，以下是最常用的功能分类。

##### 1. 字符替换（最核心功能）

将输入中属于 “原始字符集” 的字符，一对一替换为 “目标字符集” 中对应的字符。

- 规则：两个字符集的长度需一致，若目标字符集较短，会自动重复最后一个字符补齐；若原始字符集较短，则仅替换匹配的部分字符。

- 示例 1：小写字母转大写字母

```
echo "hello linux" | tr 'a-z' 'A-Z'
# 输出结果：HELLO LINUX
```

- 示例 2：替换指定单个字符

```
echo "123abc" | tr '1a' 'xy'
# 输出结果：x23xbc（1→x，a→y，其他字符不变）
```

##### 2. 字符删除（-d 选项）

仅保留 “原始字符集” 之外的字符，即删除输入中所有匹配 “原始字符集” 的字符。

- 特点：使用时无需指定 “目标字符集”，仅需给出要删除的字符范围或具体字符。

- 示例 1：删除所有数字

```
echo "abc123def456" | tr -d '0-9'
# 输出结果：abcdef
```

- 示例 2：删除指定多个字符

```
echo "hello,world!" | tr -d 'o,!'
# 输出结果：hellwrld
```

##### 3. 字符压缩（-s 选项）

将输入中连续重复的字符压缩为单个字符，需配合 “目标字符集” 指定要压缩的字符类型。

- 示例 1：压缩连续的空格为单个空格

```
echo "hello   linux  is  cool" | tr -s ' '
# 输出结果：hello linux is cool
```

- 示例 2：先删除数字再压缩空格

```
echo "abc  123  def  456" | tr -d '0-9' | tr -s ' '
# 输出结果：abc def
```

##### 4. 其他实用选项

| 选项 | 功能说明                                                     | 示例           |
| ---- | ------------------------------------------------------------ | -------------- |
| -c   | 取 “原始字符集” 的补集，即处理所有不匹配该字符集的字符       | `echo "abc123" |
| -t   | 截断 “原始字符集”，使其长度与 “目标字符集” 一致，避免自动补齐 | `echo "1234"   |

#### 三、常见应用场景示例

除了基础功能，tr 在实际工作中还有很多便捷用法，以下是典型场景。

- **清理文件中的特殊字符**

删除文件中无法识别的控制字符（如 ^M，即 Windows 下的换行符）：

```
tr -d '\r' < input.txt > output.txt
```

- **生成随机密码**

结合date和md5sum生成随机字符串，并提取前 8 位作为简易密码：

```
date +%s | md5sum | tr -d ' -' | cut -c 1-8
```

- **统计文件中字符出现次数**

先排序字符，再压缩重复字符并统计（需配合sort和uniq）：

```
cat test.txt | tr -d '\n' | fold -w1 | sort | uniq -c
```

#### 四、注意事项

- 字符集需用单引号包裹，避免 Shell 解析特殊字符（如*、?）。

- tr 仅处理标准输入，无法直接指定输出文件，需通过重定向（>）保存结果。

- 不支持正则表达式，仅能使用字符范围（如a-z）、转义字符（如\n代表换行）。



### sed